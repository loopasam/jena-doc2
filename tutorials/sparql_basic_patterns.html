<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

  <title>Apache Jena - SPARQL Tutorial - Basic Patterns</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="/jena-doc2/css/bootstrap.css" rel="stylesheet" media="screen">
  <link href="/jena-doc2/css/bootstrap-extension.css" rel="stylesheet" type="text/css">
  
  <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
  <script src="/jena-doc2/js/jena-navigation.js" type="text/javascript"></script>
  <script src="/jena-doc2/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="/jena-doc2/js/breadcrumbs.js" type="text/javascript"></script>
</head>

<body>



<nav class="navbar navbar-default" role="navigation">
<div class="container">
  <div class="navbar-header">
 	<a class="navbar-brand" href="/jena-doc2/index.html">
		<img class="logo-menu" src="/jena-doc2/images/jena-logo/jena-logo-notext-small.png" alt="jena logo">Apache Jena</a>
  </div>
  
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>


  <div class="collapse navbar-collapse navbar-ex1-collapse">
    <ul class="nav navbar-nav">



              <li id="homepage"><a href="/jena-doc2/index.html"><span class="glyphicon glyphicon-home"></span> Home</a></li>
              <li id="download"><a href="/jena-doc2/download/index.html"><span class="glyphicon glyphicon-download-alt"></span> Download</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-book"></span> Learn <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li class="dropdown-header">Tutorials</li>
                  <li><a href="/jena-doc2/tutorials/index.html">Overview</a></li>
                  <li><a href="/jena-doc2/tutorials/rdf_api.html">RDF core API tutorial</a></li>
                  <li><a href="/jena-doc2/tutorials/sparql.html">SPARQL tutorial</a></li>
                  <li><a href="/jena-doc2/documentation/query/manipulating_sparql_using_arq.html">Manipulating SPARQL using ARQ</a></li>
                  <li><a href="/jena-doc2/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
                  <li><a href="/jena-doc2/documentation/notes/index.html">How-To's</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">References</li>
                  <li><a href="/jena-doc2/documentation/index.html">Overview</a></li>
                  <li><a href="/jena-doc2/documentation/javadoc/">Javadoc</a></li>
                  <li><a href="/jena-doc2/documentation/rdf/index.html">RDF API</a></li>
                  <li><a href="/jena-doc2/documentation/io/">RDF I/O</a></li>
                  <li><a href="/jena-doc2/documentation/query/index.html">ARQ (SPARQL)</a></li>
                  <li><a href="/jena-doc2/documentation/query/text-query.html">Text Search</a></li>
                  <li><a href="/jena-doc2/documentation/tdb/index.html">TDB</a></li>
                  <li><a href="/jena-doc2/documentation/sdb/index.html">SDB</a></li>
                  <li><a href="/jena-doc2/documentation/serving_data/index.html">Fuseki</a></li>
                  <li><a href="/jena-doc2/documentation/assembler/index.html">Assembler</a></li>
                  <li><a href="/jena-doc2/documentation/ontology/">Ontology API</a></li>
                  <li><a href="/jena-doc2/documentation/inference/index.html">Inference API</a></li>
                  <li><a href="/jena-doc2/documentation/tools/index.html">Command-line tools</a></li>
                </ul>
              </li>
              <li id="ask"><a href="/jena-doc2/help_and_support/index.html"><span class="glyphicon glyphicon-question-sign"></span> Ask</a></li>
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-bullhorn"></span> Get involved <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="/jena-doc2/getting_involved/index.html">Contribute</a></li>
                  <li><a href="/jena-doc2/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Project</li>
                  <li><a href="/jena-doc2/about_jena/about.html">About Jena</a></li>
                  <li><a href="/jena-doc2/about_jena/roadmap.html">Roadmap</a></li>
                  <li><a href="/jena-doc2/about_jena/architecture.html">Architecture</a></li>
                  <li><a href="/jena-doc2/about_jena/team.html">Project team</a></li>
                  <li><a href="/jena-doc2/about_jena/contributions.html">Related projects</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">ASF</li>
                  <li><a href="http://www.apache.org/">Apache Software Foundation</a></li>
                  <li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
                  <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                  <li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
                  <li><a href="http://www.apache.org/security/">Security</a></li>
                </ul>
              </li>

   
    </ul>
  </div>
</div>
</nav>


<div class="container">
	<div class="row">
	<div class="col-md-12">
	<div id="breadcrumbs"></div>
	<h1 class="title">SPARQL Tutorial - Basic Patterns</h1>
  <p>This section covers basic patterns and solutions, the main building
blocks of SPARQL queries.</p>
<h2 id="solutions">Solutions</h2>
<p>Query solutions are a set of pairs of a variable name with a value.
A <code>SELECT</code> query directly exposes the solutions (after
order/limit/offset are applied) as the result set - other query
forms use the solutions to make an graph. The solution is the way
the pattern matched - which values the variables must take for a
pattern to match.</p>
<p>The first query example had a single solution. Change the pattern
to this second query: (<a href="sparql_data/q-bp1.rq">q-bp1.rq</a>):</p>
<div class="codehilite"><pre><span class="n">SELECT</span> <span class="o">?</span><span class="n">x</span> <span class="o">?</span><span class="n">fname</span>
<span class="n">WHERE</span> <span class="p">{</span><span class="o">?</span><span class="n">x</span>  <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#FN&gt;  ?fname}</span>
</pre></div>


<p>This has 4 solutions, one for each VCARD name property triples in
the data source</p>
<div class="codehilite"><pre><span class="o">----------------------------------------------------</span>
<span class="o">|</span> <span class="n">x</span>                                <span class="o">|</span> <span class="n">name</span>          <span class="o">|</span>
<span class="o">====================================================</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//somewhere/RebeccaSmith/&gt; | &quot;Becky Smith&quot; |</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//somewhere/SarahJones/&gt;   | &quot;Sarah Jones&quot; |</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//somewhere/JohnSmith/&gt;    | &quot;John Smith&quot;  |</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//somewhere/MattJones/&gt;    | &quot;Matt Jones&quot;  |</span>
<span class="o">----------------------------------------------------</span>
</pre></div>


<p>So far, with triple patterns and basic patterns, every variable
will be defined in every solution. The solutions to a query can be
thought of a table, but in the general case, it is a table where
not every row will have a value for every column. All the solutions
to a given SPARQL query don't have to have values for all the
variables in every solution as we shall see later.</p>
<h2 id="basic-patterns">Basic Patterns</h2>
<p>A basic pattern is a set of triple patterns. It matches when the
triple patterns all match with the same value used each time the
variable with the same name is used.</p>
<div class="codehilite"><pre><span class="n">SELECT</span> <span class="o">?</span><span class="n">givenName</span>
<span class="n">WHERE</span>
  <span class="p">{</span> <span class="o">?</span><span class="n">y</span>  <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#Family&gt;  &quot;Smith&quot; .</span>
    <span class="o">?</span><span class="n">y</span>  <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#Given&gt;  ?givenName .</span>
  <span class="p">}</span>
</pre></div>


<p>This query (<a href="sparql_data/q-bp2.rq">q-bp2.rq</a>)involves two triple patterns, each
triple ends in a '.' (but the dot after the last one can be omitted
like it was in the one triple pattern example). The variable y has
to be the same for each triple pattern match. The the solutions
are:</p>
<div class="codehilite"><pre><span class="o">-------------</span>
<span class="o">|</span> <span class="n">givenName</span> <span class="o">|</span>
<span class="o">=============</span>
<span class="o">|</span> <span class="s">&quot;John&quot;</span>    <span class="o">|</span>
<span class="o">|</span> <span class="s">&quot;Rebecca&quot;</span> <span class="o">|</span>
<span class="o">-------------</span>
</pre></div>


<h3 id="qnames">QNames</h3>
<p>There is shorthand mechanism for writing long URIs using prefixes.
The query above is more clearly written as the query
(<a href="sparql_data/q-bp3.rq">q-bp3.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">vcard</span><span class="o">:</span>      <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#&gt;</span>

<span class="n">SELECT</span> <span class="o">?</span><span class="n">givenName</span>
<span class="n">WHERE</span>
 <span class="p">{</span> <span class="o">?</span><span class="n">y</span> <span class="n">vcard</span><span class="o">:</span><span class="n">Family</span> <span class="s">&quot;Smith&quot;</span> <span class="p">.</span>
   <span class="o">?</span><span class="n">y</span> <span class="n">vcard</span><span class="o">:</span><span class="n">Given</span>  <span class="o">?</span><span class="n">givenName</span> <span class="p">.</span>
 <span class="p">}</span>
</pre></div>


<p>This is a prefixing mechanism - the two parts of the URIs, from the
prefix declaration and from the part after the ":" in the qname,
are concatenated together. This is strictly not what an XML qname
is but uses the RDF rule for turning a qname into a URI by
concatenating the parts.</p>
<h3 id="blank-nodes">Blank Nodes</h3>
<p>Change the query just a little to return y as well
(<a href="sparql_data/q-bp4.rq">q-bp4.rq</a>) :</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">vcard</span><span class="o">:</span>      <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#&gt;</span>

<span class="n">SELECT</span> <span class="o">?</span><span class="n">y</span> <span class="o">?</span><span class="n">givenName</span>
<span class="n">WHERE</span>
 <span class="p">{</span> <span class="o">?</span><span class="n">y</span> <span class="n">vcard</span><span class="o">:</span><span class="n">Family</span> <span class="s">&quot;Smith&quot;</span> <span class="p">.</span>
   <span class="o">?</span><span class="n">y</span> <span class="n">vcard</span><span class="o">:</span><span class="n">Given</span>  <span class="o">?</span><span class="n">givenName</span> <span class="p">.</span>
 <span class="p">}</span>
</pre></div>


<p>and the blank nodes appear</p>
<div class="codehilite"><pre><span class="o">--------------------</span>
<span class="o">|</span> <span class="n">y</span>    <span class="o">|</span> <span class="n">givenName</span> <span class="o">|</span>
<span class="o">====================</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b0</span> <span class="o">|</span> <span class="s">&quot;John&quot;</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b1</span> <span class="o">|</span> <span class="s">&quot;Rebecca&quot;</span> <span class="o">|</span>
<span class="o">--------------------</span>
</pre></div>


<p>as odd looking qnames starting _:. This isn't the internal label
for the blank node - it is ARQ printing them out that assigned the
_:b0, _:b1 to show when two blank nodes are the same. Here they
are different. It does not reveal the internal label used for the
blank node although that is available when using the Java API.</p>
<p><a href="sparql_filters.html">Next: Filters</a></p>
  </div>
</div>

</div><!--/.container -->

    <footer class="footer">
      <div class="container">
        <p>Copyright &copy; 2011&ndash;2013 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        </p>
        <p>
        Apache Jena, Jena, the Apache Jena project logo,
        Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
        </p>
      </div>
  </footer>
      

</body>
</html>
