<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

  <title>Apache Jena - Tutorial SPARQL – Padrões Básicos</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="/jena-doc2/css/bootstrap.css" rel="stylesheet" media="screen">
  <link href="/jena-doc2/css/bootstrap-extension.css" rel="stylesheet" type="text/css">
  
  <script src="/jena-doc2//code.jquery.com/jquery.js"></script>
  <script src="/jena-doc2/js/jena-navigation.js" type="text/javascript"></script>
  <script src="/jena-doc2/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="/jena-doc2/js/breadcrumbs.js" type="text/javascript"></script>
</head>

<body>



<nav class="navbar navbar-default" role="navigation">
<div class="container">
  <div class="navbar-header">
 	<a class="navbar-brand" href="/jena-doc2/index.html">
		<img class="logo-menu" src="/jena-doc2/images/jena-logo/jena-logo-notext-small.png" alt="jena logo">Apache Jena</a>
  </div>
  
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>


  <div class="collapse navbar-collapse navbar-ex1-collapse">
    <ul class="nav navbar-nav">



              <li id="homepage"><a href="/jena-doc2/index.html"><span class="glyphicon glyphicon glyphicon-home"></span> Home</a></li>
              <li id="download"><a href="/jena-doc2/download/index.html"><span class="glyphicon glyphicon-download-alt"></span> Download</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-book"></span> Learn <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li class="dropdown-header">Tutorials</li>
                  <li><a href="/jena-doc2/tutorials/index.html">Overview</a></li>
                  <li><a href="/jena-doc2/tutorials/rdf_api.html">RDF core API tutorial</a></li>
                  <li><a href="/jena-doc2/tutorials/sparql.html">SPARQL tutorial</a></li>
                  <li><a href="/jena-doc2/documentation/query/manipulating_sparql_using_arq.html">Manipulating SPARQL using ARQ</a></li>
                  <li><a href="/jena-doc2/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
                  <li><a href="/jena-doc2/documentation/notes/index.html">How-To's</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">References</li>
                  <li><a href="/jena-doc2/documentation/index.html">Overview</a></li>
                  <li><a href="/jena-doc2/documentation/javadoc/">Javadoc</a></li>
                  <li><a href="/jena-doc2/documentation/rdf/index.html">RDF API</a></li>
                  <li><a href="/jena-doc2/documentation/io/">RDF I/O</a></li>
                  <li><a href="/jena-doc2/documentation/query/index.html">ARQ (SPARQL)</a></li>
                  <li><a href="/jena-doc2/documentation/query/text-query.html">Text Search</a></li>
                  <li><a href="/jena-doc2/documentation/tdb/index.html">TDB</a></li>
                  <li><a href="/jena-doc2/documentation/sdb/index.html">SDB</a></li>
                  <li><a href="/jena-doc2/documentation/serving_data/index.html">Fuseki</a></li>
                  <li><a href="/jena-doc2/documentation/assembler/index.html">Assembler</a></li>
                  <li><a href="/jena-doc2/documentation/ontology/">Ontology API</a></li>
                  <li><a href="/jena-doc2/documentation/inference/index.html">Inference API</a></li>
                  <li><a href="/jena-doc2/documentation/tools/index.html">Command-line tools</a></li>
                </ul>
              </li>
              <li id="ask"><a href="/jena-doc2/help_and_support/index.html"><span class="glyphicon glyphicon-question-sign"></span> Ask</a></li>
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-bullhorn"></span> Get involved <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="/jena-doc2/getting_involved/index.html">Contribute</a></li>
                  <li><a href="/jena-doc2/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Project</li>
                  <li><a href="/jena-doc2/about_jena/about.html">About Jena</a></li>
                  <li><a href="/jena-doc2/about_jena/roadmap.html">Roadmap</a></li>
                  <li><a href="/jena-doc2/about_jena/architecture.html">Architecture</a></li>
                  <li><a href="/jena-doc2/about_jena/team.html">Project team</a></li>
                  <li><a href="/jena-doc2/about_jena/contributions.html">Related projects</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">ASF</li>
                  <li><a href="http://www.apache.org/">Apache Software Foundation</a></li>
                  <li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
                  <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                  <li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
                  <li><a href="http://www.apache.org/security/">Security</a></li>
                </ul>
              </li>

   
    </ul>
  </div>
</div>
</nav>


<div class="container">
	<div class="row">
	<div class="col-md-12">
	<div id="breadcrumbs"></div>
	<h1 class="title">Tutorial SPARQL – Padrões Básicos</h1>
  <p>Esta sessão cobre os padrões básicos e as soluções, os principais blocos das consultas SPARQL.</p>
<h2 id="solucoes">Soluções</h2>
<p>Soluções são um conjunto de pares de variáveis com um valor. Uma consulta <code>SELECT</code> expõe diretamente as soluções (depois de ordenar/limitar/deslocar) como o conjunto resultado – outras formas de consulta usam as soluções para fazer um grafo. Solução é a maneira como o padrão é casado – em que os valores das variáveis são utilizados para casar com o padrão.</p>
<p>A primeira consulta de exemplo teve uma solução simples. Mude o padrão para esta segunda consulta: (<a href="sparql_data/q-bp1.rq">q-bp1.rq</a>):</p>
<div class="codehilite"><pre><span class="n">SELECT</span> <span class="o">?</span><span class="n">x</span> <span class="o">?</span><span class="n">fname</span>
<span class="n">WHERE</span> <span class="p">{</span><span class="o">?</span><span class="n">x</span>  <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#FN&gt;  ?fname}</span>
</pre></div>


<p>Isso tem quatro soluções, uma pra cada propriedade nome de VCARD das triplas na fonte de dados.</p>
<div class="codehilite"><pre><span class="o">----------------------------------------------------</span>
<span class="o">|</span> <span class="n">x</span>                                <span class="o">|</span> <span class="n">name</span>          <span class="o">|</span>
<span class="o">====================================================</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//somewhere/RebeccaSmith/&gt; | &quot;Becky Smith&quot; |</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//somewhere/SarahJones/&gt;   | &quot;Sarah Jones&quot; |</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//somewhere/JohnSmith/&gt;    | &quot;John Smith&quot;  |</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//somewhere/MattJones/&gt;    | &quot;Matt Jones&quot;  |</span>
<span class="o">----------------------------------------------------</span>
</pre></div>


<p>Até agora, com padrões de triplas e padrões básicos, cada variável será definida em cada solução. As soluções de uma consulta podem ser pensadas como uma tabela, mas no caso geral, é uma tabela onde nem sempre cada linha vai ter um valor para cada coluna. Todas as soluções para uma consulta SPARQL não têm que ter valores para todas as variáveis em todas as soluções como veremos depois.</p>
<h2 id="padroes-basicos">Padrões Básicos</h2>
<p>Um padrão básico é um conjunto de padrões de triplas. Ele casa quando todo o padrão da tripla casa com o mesmo valor usado cada vez que a variável com o mesmo nome é usada.</p>
<div class="codehilite"><pre><span class="n">SELECT</span> <span class="o">?</span><span class="n">givenName</span>
<span class="n">WHERE</span>
  <span class="p">{</span> <span class="o">?</span><span class="n">y</span>  <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#Family&gt;  &quot;Smith&quot; .</span>
    <span class="o">?</span><span class="n">y</span>  <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#Given&gt;  ?givenName .</span>
  <span class="p">}</span>
</pre></div>


<p>Essa consulta (<a href="sparql_data/q-bp2.rq">q-bp2.rq</a>)envolve dois padrões de triplas, cada tripla termina com '.' (mas o ponto depois do último pode ser omitido como foi omitido no exemplo de padrão de uma tripla). A variável y tem que ser a mesma para cada casamento de padrão de tripla. As soluções são:</p>
<div class="codehilite"><pre><span class="o">-------------</span>
<span class="o">|</span> <span class="n">givenName</span> <span class="o">|</span>
<span class="o">=============</span>
<span class="o">|</span> <span class="s">&quot;John&quot;</span>    <span class="o">|</span>
<span class="o">|</span> <span class="s">&quot;Rebecca&quot;</span> <span class="o">|</span>
<span class="o">-------------</span>
</pre></div>


<h3 id="qnames">QNames</h3>
<p>Aqui temos um mecanismo prático para escrever longas URIs usando prefixos. A consulta acima poderia ser escrita mais claramente como a consulta:
(<a href="sparql_data/q-bp3.rq">q-bp3.rq</a>):</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">vcard</span><span class="o">:</span>      <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#&gt;</span>

<span class="n">SELECT</span> <span class="o">?</span><span class="n">givenName</span>
<span class="n">WHERE</span>
 <span class="p">{</span> <span class="o">?</span><span class="n">y</span> <span class="n">vcard</span><span class="o">:</span><span class="n">Family</span> <span class="s">&quot;Smith&quot;</span> <span class="p">.</span>
   <span class="o">?</span><span class="n">y</span> <span class="n">vcard</span><span class="o">:</span><span class="n">Given</span>  <span class="o">?</span><span class="n">givenName</span> <span class="p">.</span>
 <span class="p">}</span>
</pre></div>


<p>Isso é um mecanismo de prefixagem – as duas partes do URI, da declaração do prefixo e da parte depois de ":" no qname são concatenadas. Isso não é exatamente como um qname XML é, mas usa as regras de RDF para transformar o qname numa URI concatenando as partes.</p>
<h3 id="blank-nodes">Blank Nodes</h3>
<p>Mude a consulta só para retornar y da seguinte forma:
(<a href="sparql_data/q-bp4.rq">q-bp4.rq</a>) :</p>
<div class="codehilite"><pre><span class="n">PREFIX</span> <span class="n">vcard</span><span class="o">:</span>      <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/vcard-rdf/3.0#&gt;</span>

<span class="n">SELECT</span> <span class="o">?</span><span class="n">y</span> <span class="o">?</span><span class="n">givenName</span>
<span class="n">WHERE</span>
 <span class="p">{</span> <span class="o">?</span><span class="n">y</span> <span class="n">vcard</span><span class="o">:</span><span class="n">Family</span> <span class="s">&quot;Smith&quot;</span> <span class="p">.</span>
   <span class="o">?</span><span class="n">y</span> <span class="n">vcard</span><span class="o">:</span><span class="n">Given</span>  <span class="o">?</span><span class="n">givenName</span> <span class="p">.</span>
 <span class="p">}</span>
</pre></div>


<p>e os blank nodes aparecem</p>
<div class="codehilite"><pre><span class="o">--------------------</span>
<span class="o">|</span> <span class="n">y</span>    <span class="o">|</span> <span class="n">givenName</span> <span class="o">|</span>
<span class="o">====================</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b0</span> <span class="o">|</span> <span class="s">&quot;John&quot;</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">_</span><span class="o">:</span><span class="n">b1</span> <span class="o">|</span> <span class="s">&quot;Rebecca&quot;</span> <span class="o">|</span>
<span class="o">--------------------</span>
</pre></div>


<p>como os estranhos qnames iniciados com  _:. Isso não é o título interno do blank node – isso é o ARQ imprimindo-os, atribuindo _:b0, _:b1 para mostrar quando dois blank nodes são o mesmo. Aqui eles são diferentes. Isso não revela o título interno usado para um blank node, mas isso está disponível quando usar a API Java.</p>
<p><a href="sparql_filters_pt.html">Próximo: Filtros</a></p>
  </div>
</div>

</div><!--/.container -->

    <footer class="footer">
      <div class="container">
        <p>Copyright &copy; 2011&ndash;2013 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        </p>
        <p>
        Apache Jena, Jena, the Apache Jena project logo,
        Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
        </p>
      </div>
  </footer>
      

</body>
</html>
