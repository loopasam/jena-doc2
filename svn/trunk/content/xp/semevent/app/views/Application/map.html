#{extends 'main.html' /}
#{set title:'Map' /}

<div id="map-canvas"></div>

<script type="text/javascript">
$(document).ready(function() {

    $.getJSON('/geocoordinates.json', function(data) {
          
          var map;
          var mapOptions = {
                        zoom: 7,
                        center: new google.maps.LatLng(52.211814,0.113468),
                        mapTypeId: google.maps.MapTypeId.ROADMAP
           };
           map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
           data['@graph'].forEach(function(coord) {
            addMarker(new google.maps.LatLng(coord.latitude, coord.longitude), map);
          });
           
                     
          
    });
    
    function addMarker(location, map) {
        marker = new google.maps.Marker({
            position: location,
            map: map
        });
    }
    
});
</script>