<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

  <title>Apache Jena - TDB Optimizer</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="/jena-doc2/css/bootstrap.css" rel="stylesheet" media="screen">
  <link href="/jena-doc2/css/bootstrap-extension.css" rel="stylesheet" type="text/css">
  
  <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
  <script src="/jena-doc2/js/jena-navigation.js" type="text/javascript"></script>
  <script src="/jena-doc2/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="/jena-doc2/js/breadcrumbs.js" type="text/javascript"></script>
</head>

<body>



<nav class="navbar navbar-default" role="navigation">
<div class="container">
  <div class="navbar-header">
 	<a class="navbar-brand" href="/jena-doc2/index.html">
		<img class="logo-menu" src="/jena-doc2/images/jena-logo/jena-logo-notext-small.png" alt="jena logo">Apache Jena</a>
  </div>
  
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>


  <div class="collapse navbar-collapse navbar-ex1-collapse">
    <ul class="nav navbar-nav">



              <li id="homepage"><a href="/jena-doc2/index.html"><span class="glyphicon glyphicon glyphicon-home"></span> Home</a></li>
              <li id="download"><a href="/jena-doc2/download/index.html"><span class="glyphicon glyphicon-download-alt"></span> Download</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-book"></span> Learn <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li class="dropdown-header">Tutorials</li>
                  <li><a href="/jena-doc2/tutorials/index.html">Overview</a></li>
                  <li><a href="/jena-doc2/tutorials/rdf_api.html">RDF core API tutorial</a></li>
                  <li><a href="/jena-doc2/tutorials/sparql.html">SPARQL tutorial</a></li>
                  <li><a href="/jena-doc2/documentation/query/manipulating_sparql_using_arq.html">Manipulating SPARQL using ARQ</a></li>
                  <li><a href="/jena-doc2/tutorials/using_jena_with_eclipse.html">Using Jena with Eclipse</a></li>
                  <li><a href="/jena-doc2/documentation/notes/index.html">How-To's</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">References</li>
                  <li><a href="/jena-doc2/documentation/index.html">Overview</a></li>
                  <li><a href="/jena-doc2/documentation/javadoc/">Javadoc</a></li>
                  <li><a href="/jena-doc2/documentation/rdf/index.html">RDF API</a></li>
                  <li><a href="/jena-doc2/documentation/io/">RDF I/O</a></li>
                  <li><a href="/jena-doc2/documentation/query/index.html">ARQ (SPARQL)</a></li>
                  <li><a href="/jena-doc2/documentation/query/text-query.html">Text Search</a></li>
                  <li><a href="/jena-doc2/documentation/tdb/index.html">TDB</a></li>
                  <li><a href="/jena-doc2/documentation/sdb/index.html">SDB</a></li>
                  <li><a href="/jena-doc2/documentation/serving_data/index.html">Fuseki</a></li>
                  <li><a href="/jena-doc2/documentation/assembler/index.html">Assembler</a></li>
                  <li><a href="/jena-doc2/documentation/ontology/">Ontology API</a></li>
                  <li><a href="/jena-doc2/documentation/inference/index.html">Inference API</a></li>
                  <li><a href="/jena-doc2/documentation/tools/index.html">Command-line tools</a></li>
                </ul>
              </li>
              <li id="ask"><a href="/jena-doc2/help_and_support/index.html"><span class="glyphicon glyphicon-question-sign"></span> Ask</a></li>
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-bullhorn"></span> Get involved <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="/jena-doc2/getting_involved/index.html">Contribute</a></li>
                  <li><a href="/jena-doc2/help_and_support/bugs_and_suggestions.html">Report a bug</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">Project</li>
                  <li><a href="/jena-doc2/about_jena/about.html">About Jena</a></li>
                  <li><a href="/jena-doc2/about_jena/roadmap.html">Roadmap</a></li>
                  <li><a href="/jena-doc2/about_jena/architecture.html">Architecture</a></li>
                  <li><a href="/jena-doc2/about_jena/team.html">Project team</a></li>
                  <li><a href="/jena-doc2/about_jena/contributions.html">Related projects</a></li>
                  <li class="divider"></li>
                  <li class="dropdown-header">ASF</li>
                  <li><a href="http://www.apache.org/">Apache Software Foundation</a></li>
                  <li><a href="http://www.apache.org/licenses/LICENSE-2.0">License</a></li>
                  <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                  <li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li>
                  <li><a href="http://www.apache.org/security/">Security</a></li>
                </ul>
              </li>

   
    </ul>
  </div>
</div>
</nav>


<div class="container">
	<div class="row">
	<div class="col-md-12">
	<div id="breadcrumbs"></div>
	<h1 class="title">TDB Optimizer</h1>
  <p>Query execution in TDB involves both static and dynamic
optimizations. Static optimizations are transformations of the
SPARQL algebra performed before query execution begins; dynamic
optimizations involve deciding the best execution approach during
the execution phase and can take into account the actual data so
far retrieved.</p>
<p>The optimizer has a number of strategies: a statistics based
strategy, a fixed strategy and a strategy of no reordering.</p>
<p>For the preferred statistics strategy, the TDB optimizer uses
information captured in a per-database statistics file. The file
takes the form of a number of rules for approximate matching counts
for triple patterns. The statistic file can be automatically
generated. The user can add and modify rules to tune the database
based on higher level knowledge, such as inverse function
properties.</p>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#quickstart">Quickstart</a></li>
<li><a href="#running-tdbstats">Running tdbstats</a></li>
<li><a href="#choosing-the-optimizer-strategy">Choosing the optimizer strategy</a></li>
<li><a href="#filter-placement">Filter placement</a></li>
<li><a href="#investigating-what-is-going-on">Investigating what is going on</a></li>
<li><a href="#statistics-rule-file">Statistics Rule File</a><ul>
<li><a href="#statistics-rule-language">Statistics Rule Language</a></li>
<li><a href="#abbreviated-rule-form">Abbreviated Rule Form</a></li>
<li><a href="#defaults">Defaults</a></li>
</ul>
</li>
<li><a href="#generating-a-statistics-file">Generating a statistics file</a><ul>
<li><a href="#generating-statistics-for-union-graphs">Generating statistics for Union Graphs</a></li>
</ul>
</li>
<li><a href="#writing-rules">Writing Rules</a></li>
</ul>
<h2 id="quickstart">Quickstart</h2>
<p>This section provides a practical how-to.</p>
<ol>
<li>Load data.</li>
<li>Generate the statistics file. Run tdbstats.</li>
<li>Place the file generated in the database directory with the
    name stats.opt.</li>
</ol>
<h2 id="running-tdbstats">Running <code>tdbstats</code></h2>
<p>Usage:</p>
<div class="codehilite"><pre> <span class="n">tdbstats</span> <span class="o">--</span><span class="n">loc</span><span class="o">=</span><span class="kt">DIR</span><span class="o">|--</span><span class="n">desc</span><span class="o">=</span><span class="n">assemblerFile</span> <span class="p">[</span><span class="o">--</span><span class="n">graph</span><span class="o">=</span><span class="n">URI</span><span class="p">]</span>
</pre></div>


<h2 id="choosing-the-optimizer-strategy">Choosing the optimizer strategy</h2>
<p>TDB chooses the basic graph pattern optimizer by the presence of a
file in the database directory.</p>
<p>Optimizer control files</p>
<table>
<thead>
<tr>
<th>File name</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>none.opt</code></td>
<td>No reordering - execute triple patterns in the order in the query</td>
</tr>
<tr>
<td><code>fixed.opt</code></td>
<td>Use a built-in reordering based on the number of variables in a triple pattern.</td>
</tr>
<tr>
<td><code>stats.opt</code></td>
<td>The contents of this file are the weighing rules (see below).</td>
</tr>
</tbody>
</table>
<p>The contents of the files <code>none.opt</code> and <code>fixed.opt</code> are not read
and don't matter. They can be zero-length files.</p>
<p>If more then one file is found, the choice is made: <code>stats.opt</code>
over <code>fixed.opt</code> over <code>none.opt</code>.</p>
<p>The "no reorder" strategy can be useful in investigating the
effects. Filter placement still takes place.</p>
<h2 id="filter-placement">Filter placement</h2>
<p>One of the key optimization is of filtered basic graph patterns.
This optimization decides the best order of triple patterns in a
basic graph pattern and also the best point at which to apply the
filters within the triple patterns.</p>
<p>Any filter expression of a basic graph pattern is placed
immediately after all it's variables will be bound. Conjunctions at
the top level in filter expressions are broken into their
constituent pieces and placed separately.</p>
<h2 id="investigating-what-is-going-on">Investigating what is going on</h2>
<p>TDB can optionally log query execution details. This is controlled
by two setting: the logging level and a context setting. Having two
setting means it is possible to log some queries and not others.</p>
<p>The logger used is called <code>com.hp.hpl.jena.arq.exec</code>. Message are
sent at level "info". So for log4j, the following can be set in the
log4j.properties file:</p>
<div class="codehilite"><pre><span class="cp"># Execution logging</span>
<span class="n">log4j</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">com</span><span class="p">.</span><span class="n">hp</span><span class="p">.</span><span class="n">hpl</span><span class="p">.</span><span class="n">jena</span><span class="p">.</span><span class="n">arq</span><span class="p">.</span><span class="n">info</span><span class="o">=</span><span class="n">WARN</span>
<span class="n">log4j</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">com</span><span class="p">.</span><span class="n">hp</span><span class="p">.</span><span class="n">hpl</span><span class="p">.</span><span class="n">jena</span><span class="p">.</span><span class="n">arq</span><span class="p">.</span><span class="n">exec</span><span class="o">=</span><span class="n">WARN</span>
</pre></div>


<p>In versions of TDB before 0.8.7, this is:</p>
<div class="codehilite"><pre><span class="n">log4j</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">com</span><span class="p">.</span><span class="n">hp</span><span class="p">.</span><span class="n">hpl</span><span class="p">.</span><span class="n">jena</span><span class="p">.</span><span class="n">tdb</span><span class="p">.</span><span class="n">exec</span><span class="o">=</span><span class="n">INFO</span>
</pre></div>


<p>The context setting is for key (Java constant) <code>ARQ.symLogExec</code>. To
set globally:</p>
<div class="codehilite"><pre><span class="n">TDB</span><span class="p">.</span><span class="n">getContext</span><span class="p">().</span><span class="n">set</span><span class="p">(</span><span class="n">ARQ</span><span class="p">.</span><span class="n">symLogExec</span><span class="p">,</span><span class="nb">true</span><span class="p">)</span><span class="err"> </span><span class="p">;</span>
</pre></div>


<p>and it may also be set on an individual query execution using it's
local context.</p>
<div class="codehilite"><pre> <span class="n">QueryExecutiuon</span> <span class="n">qExec</span> <span class="o">=</span> <span class="n">QueryExecutionFactory</span><span class="p">.</span><span class="n">create</span><span class="p">(...)</span><span class="err"> </span><span class="p">;</span>
 <span class="n">qExec</span><span class="p">.</span><span class="n">getContext</span><span class="p">().</span><span class="n">set</span><span class="p">(</span><span class="n">ARQ</span><span class="p">.</span><span class="n">symLogExec</span><span class="p">,</span><span class="nb">true</span><span class="p">)</span><span class="err"> </span><span class="p">;</span>
</pre></div>


<p>Use <code>TDB.symLogExec</code> for versions prior to 0.8.8.</p>
<p>On the command line:</p>
<div class="codehilite"><pre> <span class="n">tdbquery</span> <span class="o">--</span><span class="n">set</span> <span class="n">tdb</span><span class="o">:</span><span class="n">logExec</span><span class="o">=</span><span class="nb">true</span> <span class="o">--</span><span class="n">file</span> <span class="n">queryfile</span>
</pre></div>


<p>TDB version 0.8.3 provides more fine-grained logging controls.
Instead of "true", which sets all levels, the following can be
used:</p>
<h2 id="explanation-levels">Explanation Levels</h2>
<table>
<thead>
<tr>
<th>Level</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td>INFO</td>
<td>Log each query</td>
</tr>
<tr>
<td>FINE</td>
<td>Log each query and it's algebra form after optimization</td>
</tr>
<tr>
<td>ALL</td>
<td>Log query, algebra and every database access (can be expensive)</td>
</tr>
<tr>
<td>NONE</td>
<td>No information logged</td>
</tr>
</tbody>
</table>
<p>These can be specified as string, to the command line tools, or
using the constants in <code>Explain.InfoLevel</code>.</p>
<div class="codehilite"><pre> <span class="n">qExec</span><span class="p">.</span><span class="n">getContext</span><span class="p">().</span><span class="n">set</span><span class="p">(</span><span class="n">ARQ</span><span class="p">.</span><span class="n">symLogExec</span><span class="p">,</span><span class="n">Explain</span><span class="p">.</span><span class="n">InfoLevel</span><span class="p">.</span><span class="n">FINE</span><span class="p">)</span><span class="err"> </span><span class="p">;</span>
</pre></div>


<h2 id="statistics-rule-file">Statistics Rule File</h2>
<p>The syntax is <code>SSE</code>, a simple format that uses
<a href="http://www.w3.org/TeamSubmission/turtle/" title="http://www.w3.org/TeamSubmission/turtle/">Turtle</a>-syntax
for RDF terms, keywords for other terms (for example, the stats
marks a statistics data structure), and forms a tree data
structure.</p>
<p>The structure of a statistics file takes the form:</p>
<div class="codehilite"><pre><span class="p">(</span><span class="n">prefix</span> <span class="p">...</span>
  <span class="p">(</span><span class="n">stats</span>
    <span class="p">(</span><span class="n">meta</span> <span class="p">...)</span>
    <span class="n">rule</span>
    <span class="n">rule</span>
   <span class="p">))</span>
</pre></div>


<p>that is, a <code>meta</code> block and a number of pattern rules.</p>
<p>A simple example:</p>
<div class="codehilite"><pre><span class="p">(</span><span class="n">prefix</span> <span class="p">((</span><span class="o">:</span> <span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//example/))</span>
  <span class="p">(</span><span class="n">stats</span>
    <span class="p">(</span><span class="n">meta</span>
      <span class="p">(</span><span class="n">timestamp</span> <span class="s">&quot;2008-10-23T10:35:19.122+01:00&quot;</span><span class="o">^^&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//www.w3.org/2001/XMLSchema#dateTime&gt;)</span>
      <span class="p">(</span><span class="n">run</span><span class="err">@</span> <span class="s">&quot;2008/10/23 10:35:19&quot;</span><span class="p">)</span>
      <span class="p">(</span><span class="n">count</span> <span class="mi">11</span><span class="p">))</span>
    <span class="p">(</span><span class="o">:</span><span class="n">p</span> <span class="mi">7</span><span class="p">)</span>
    <span class="p">(</span><span class="o">&lt;</span><span class="n">http</span><span class="o">:</span><span class="c1">//example/q&gt; 7)</span>
  <span class="p">))</span>
</pre></div>


<p>This example statistics file contains some metadata about
statistics (time and date the file was generated, size of graph),
the frequence count for two predicates
<code>http://example/p</code> (written
using a prefixed name) and
<code>http://example/q</code> (written in
full).</p>
<p>The numbers are the estimated counts. They do not have to be exact
- they guide the optimizer in choosing one execution plan over
another. They do not have to exactly up-to-date providing the
relative counts are representative of the data.</p>
<h3 id="statistics-rule-language">Statistics Rule Language</h3>
<p>A rule is made up of a triple pattern and a count estimation for
the approximate number of matches that the pattern will yeild. This
does have to be exact, only an indication.</p>
<p>In addition, the optimizer considers which variables will be bound
to RDF terms by the time a triplepatetrn is reached in the
execution plan being considered. For example, in the basic graph
pattern:</p>
<div class="codehilite"><pre><span class="p">{</span><span class="err"> </span><span class="o">?</span><span class="n">x</span> <span class="err"> </span><span class="o">:</span><span class="n">identifier</span>  <span class="mi">1234</span> <span class="p">.</span>
 <span class="err"> </span><span class="o">?</span><span class="n">x</span> <span class="err"> </span><span class="o">:</span><span class="n">name</span>       <span class="err"> </span><span class="o">?</span><span class="n">name</span> <span class="p">.</span>
<span class="p">}</span>
</pre></div>


<p>then ?x will be bound in pattern ?x :name ?name to an RDF term if
executed after the pattern ?x :identifier 1234.</p>
<p>A rule is of the form:</p>
<div class="codehilite"><pre><span class="p">(</span> <span class="p">(</span><span class="n">subj</span> <span class="n">pred</span> <span class="n">obj</span><span class="p">)</span> <span class="n">count</span><span class="p">)</span>
</pre></div>


<p>where <em>subj</em>, <em>pred</em>, <em>obj</em> are either RDF terms or one of the
tokens in the following table:</p>
<h3 id="statistic-rule-tokens">Statistic rule tokens</h3>
<p>Token | Description
TERM | Matches any RDF term (URI, Literal, Blank node)
VAR | Matches a named variable (e.g. ?x)
URI | Matches a URI
LITERAL | Matches an RDF literal
BNODE | Matches an RDF blank node (in the data)
ANY  |Matches anything - a term or variable</p>
<p>From the example above, <code>(VAR :identifier TERM)</code> will match
<code>?x :identifier 1234</code>.</p>
<p><code>(TERM :name VAR)</code> will match <code>?x :name ?name</code> when in a potential plan
where the <code>:identifier</code> triple pattern is first because <code>?x</code> will be a
bound term at that point but not if this triple pattern is
considered first.</p>
<p>When searching for a weighting of a triple pattern, the first rule
to match is taken.</p>
<p>The rule which says an RDF graph is a set of triples:</p>
<div class="codehilite"><pre><span class="p">((</span><span class="n">TERM</span> <span class="n">TERM</span> <span class="n">TERM</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>


<p>is always implicitly present.</p>
<p>BNODE does not match a blank node in the query (which is a variable
and matches VAR) but in the data, if it is known that slot of a
triple pattern is a blank node.</p>
<h3 id="abbreviated-rule-form">Abbreviated Rule Form</h3>
<p>While a complete rule is of the form:</p>
<div class="codehilite"><pre><span class="p">(</span> <span class="p">(</span><span class="n">subj</span> <span class="n">pred</span> <span class="n">obj</span><span class="p">)</span> <span class="n">count</span><span class="p">)</span>
</pre></div>


<p>there is an abbreviated form:</p>
<div class="codehilite"><pre><span class="p">(</span><span class="n">prediate</span> <span class="n">count</span><span class="p">)</span>
</pre></div>


<p>The abbreviated form is equivalent to writing:</p>
<div class="codehilite"><pre><span class="p">((</span><span class="n">TERM</span> <span class="n">predicate</span> <span class="n">ANY</span><span class="p">)</span> <span class="n">X</span><span class="p">)</span>
<span class="p">((</span><span class="n">ANY</span> <span class="n">predicate</span> <span class="n">TERM</span><span class="p">)</span> <span class="n">Y</span><span class="p">)</span>
<span class="p">((</span><span class="n">ANY</span> <span class="n">predicate</span> <span class="n">ANY</span><span class="p">)</span> <span class="n">count</span><span class="p">)</span>
</pre></div>


<p>where for small graphs (less that 100 triples) X=2, Y=4 but Y=40 if
the predicate is rdf:type and 2, 10, 1000 for large graphs. Use of
"VAR rdf:type Class" can be a quite unselective triple pattern and
so there is a preference to move it later in the order of execution
to allow more selective patterns reduce the set of possibilities
first. The astute reader may notice that ontological information
may render it unnecessary (the domain or range of another property
implies the class of some resource). TDB does not currently perform
this optimization.</p>
<p>These number are merely convenient guesses and the application can
use the full rules language for detailed control of pattern
weightings.</p>
<h3 id="defaults">Defaults</h3>
<p>A rule of the form:</p>
<div class="codehilite"><pre><span class="p">(</span><span class="n">other</span> <span class="n">number</span><span class="p">)</span>
</pre></div>


<p>is used when no matches from other rules (abbreviated or full) when
matching a triple pattern that has a URI in the predicate position.
If a rule of this form is absent, the default is to place the
triple pattern after all known triple patterns; this is the same as
specifying -1 as the number. To declare that the rules are complete
and no other predicates occur in the data, set this to 0 (zero)
because the triple pattern can not match the data (the predicate
does not occur).</p>
<h2 id="generating-a-statistics-file">Generating a statistics file</h2>
<p>The command line <code>tdbstats</code> will scan the data and produce a rules
file based on the frequency of properties. The output should first
go to a temporary file, then that file moved into the database
location.</p>
<p>Practical tip: Don't feed the output of this command directly to
<em>location</em>/stats.opt because when the command starts it will find
an empty statistics file at that location.</p>
<h3 id="generating-statistics-for-union-graphs">Generating statistics for Union Graphs</h3>
<p>By default <code>tdbstats</code> only processes the default graph of a dataset. However 
in some circumstances it is desirable to have the statistics generated 
over Named Graphs in the dataset.</p>
<p>The <code>tdb:unionDefaultGraph</code> option will cause TDB to synthesize a default 
graph for SPARQL queries, from the union of all Named Graphs in the 
dataset. </p>
<p>Ideally the statistics file should be generated against this 
union graph. This can be achieved using the <code>--graph</code> option as follows:</p>
<div class="codehilite"><pre> <span class="n">tdbstats</span> <span class="o">--</span><span class="n">graph</span> <span class="n">urn</span><span class="o">:</span><span class="n">x</span><span class="o">-</span><span class="n">arq</span><span class="o">:</span><span class="n">UnionGraph</span> <span class="o">--</span><span class="n">loc</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">indexes</span>
</pre></div>


<p>The <code>graph</code> parameter uses a built-in TDB <a href="/jena-doc2/documentation/tdb/datasets.html#special-graph-names">special graph name</a></p>
<h2 id="writing-rules">Writing Rules</h2>
<p>Rule for an inverse functional property:</p>
<div class="codehilite"><pre><span class="p">((</span><span class="n">VAR</span><span class="err"> </span><span class="o">:</span><span class="n">ifp</span> <span class="n">TERM</span><span class="p">)</span> <span class="mi">1</span> <span class="p">)</span>
</pre></div>


<p>and even if a property is only approximately identifying for
resources (e.g. date of birth in a small dataset of people), it is
useful to indicate this. Because the counts needed are only
approximations so the optimizer can choose one order over another,
and does not need to predicate exact counts, rules that are usually
right but may be slightly wrong are still useful overall.</p>
<p>Rules involving rdf:type can be useful where they indicate whether
a partciualr class is common or not. In some datasets</p>
<div class="codehilite"><pre><span class="p">((</span><span class="n">VAR</span> <span class="n">rdf</span><span class="o">:</span><span class="n">type</span> <span class="n">class</span><span class="p">)</span> <span class="p">...)</span>
</pre></div>


<p>may help little because a property whose domain is that class, or a
subclass, may be more elective. SO a rule like:</p>
<div class="codehilite"><pre><span class="p">((</span><span class="n">VAR</span><span class="err"> </span><span class="o">:</span><span class="n">property</span> <span class="n">VAR</span><span class="p">)</span> <span class="p">...)</span>
</pre></div>


<p>is more selective.</p>
<p>In other datasets, there may be many classes, each with a small
number of instances, in which case</p>
<div class="codehilite"><pre><span class="p">((</span><span class="n">VAR</span> <span class="n">rdf</span><span class="o">:</span><span class="n">type</span> <span class="n">class</span><span class="p">)</span> <span class="p">...)</span>
</pre></div>


<p>is a useful selective rule.</p>
  </div>
</div>

</div><!--/.container -->

    <footer class="footer">
      <div class="container">
        <p>Copyright &copy; 2011&ndash;2013 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        </p>
        <p>
        Apache Jena, Jena, the Apache Jena project logo,
        Apache and the Apache feather logos are trademarks of The Apache Software Foundation.
        </p>
      </div>
  </footer>
      

</body>
</html>
